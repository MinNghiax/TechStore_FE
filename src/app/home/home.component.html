<link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;500;700&display=swap" rel="stylesheet">

<header id="main-header">
    <div class="container">
        <div class="logo" title="ƒêi ƒë·∫øn Trang ch·ªß" [routerLink]="['/home/list']">
            <img src="assets/img/logo.png" alt="Logo" class="logo-image"> Tech Store
        </div>

        <div class="category-dropdown">
            <span class="category-toggle">
                <i class="fa fa-bars"></i> Danh m·ª•c <i class="fa fa-caret-down"></i>
            </span>
            <ul class="dropdown-menu">
                <li *ngFor="let loai of DsDM">
                    <a [routerLink]="['product/category/', loai.category_id]">
                        {{ loai.category_name }}
                    </a>
                </li>
            </ul>
        </div>

        <div class="search-bar">
            <input type="text" name="searchText" [(ngModel)]="searchText" placeholder="T√¨m ki·∫øm s·∫£n ph·∫©m..."
                id="search-input">
            <button id="search-btn" type="button" (click)="timkiem()">
                <i class="fas fa-search"></i> T√¨m ki·∫øm
            </button>
        </div>

        <div class="auth">
            <ng-container *ngIf="!isLoggedIn; else loggedInTemplate">
                <a [routerLink]="['login']">
                    <button id="login-btn">
                        <i class="fa fa-sign-in-alt"></i> ƒêƒÉng nh·∫≠p
                    </button>
                </a>
            </ng-container>

            <ng-template #loggedInTemplate>
                <div class="user-dropdown">
                    <span class="user-name">
                        <i class="fa fa-user"></i> Xin ch√†o, {{ userService.getCurrentUser()?.username }} <i
                            class="fa fa-caret-down"></i>
                    </span>
                    <ul class="dropdown-menu">
                        <li>
                            <a [routerLink]="['/home/user/updateUser', userService.getCurrentUser()?.user_id]">
                                <i class="fa fa-user-circle"></i> Th√¥ng tin ng∆∞·ªùi d√πng
                            </a>
                        </li>
                        <li>
                            <a [routerLink]="['/home/user/viewOH', userService.getCurrentUser()?.user_id]">
                                <i class="fa fa-history"></i> L·ªãch s·ª≠ mua h√†ng
                            </a>
                        </li>
                        <li (click)="logout()">
                            <i class="fa fa-sign-out-alt"></i> ƒêƒÉng xu·∫•t
                        </li>
                    </ul>
                </div>

                <ng-container *ngIf="userService.getCurrentUser()?.role_id == 1">
                    <a [routerLink]="['/admin']">
                        <button id="admin-btn">Trang Admin</button>
                    </a>
                </ng-container>
            </ng-template>
        </div>

        <div class="cart" [routerLink]="['/home/product/carts']">
            <button id="cart-btn">
                <i class="fa fa-shopping-cart"></i> Gi·ªè h√†ng
            </button>
        </div>
    </div>
</header>

<div class="layout-container">
    <aside class="sidebar-left">
        <ul>
            <li *ngFor="let loai of DsDM">
                <a [routerLink]="['product/category/', loai.category_id]">
                    {{ loai.category_name }}
                </a>
            </li>
        </ul>
    </aside>

    <main class="main-banner">
        <div class="slideshow-container">
            <div class="slide" *ngFor="let banner of banners; let i = index" [class.active]="i === currentSlide">
                <img [src]="banner" class="slide-image" />
            </div>

            <a class="prev" (click)="prevSlide()">‚ùÆ</a>
            <a class="next" (click)="nextSlide()">‚ùØ</a>
        </div>
    </main>

    <div class="right-info-panel">
        <div class="policy-list">
            <p><i class="fa fa-shipping-fast"></i> Giao 1h n·ªôi th√†nh</p>
            <p><i class="fa fa-shield-alt"></i> B·∫£o h√†nh ch√≠nh h√£ng</p>
            <p><i class="fa fa-credit-card"></i> Tr·∫£ g√≥p 0%</p>
            <h4>üìû T∆∞ v·∫•n mi·ªÖn ph√≠</h4>
            <strong>0779421219 - M·∫°nh</strong>
            <strong>ngocmanh0409&#64;gmail.com</strong>
        </div>
    </div>
</div>

<div>
    <router-outlet></router-outlet>
</div>

<footer>
    <div class="container">
        <div class="footer-section">
            <h3>V·ªÅ ch√∫ng t√¥i</h3>
            <p>
                Ch√∫ng t√¥i l√† c·ª≠a h√†ng tr·ª±c tuy·∫øn cung c·∫•p s·∫£n ph·∫©m ch·∫•t l∆∞·ª£ng v·ªõi gi√° c·∫£ h·ª£p l√Ω.
            </p>
        </div>
        <div class="footer-section">
            <h3>Li√™n k·∫øt</h3>
            <ul>
                <li><a href="#">Trang ch·ªß</a></li>
                <li><a href="#">S·∫£n ph·∫©m</a></li>
                <li><a href="#">Gi·ªè h√†ng</a></li>
                <li><a href="#">Thanh to√°n</a></li>
            </ul>
        </div>
        <div class="footer-section">
            <h3>Theo d√µi ch√∫ng t√¥i</h3>
            <div class="social-icons">
                <a href="https://www.facebook.com/yuki494.vn" target="_blank"><i class="fab fa-facebook"></i></a>
                <a href="#" target="_blank"><i class="fab fa-twitter"></i></a>
                <a href="https://www.instagram.com/" target="_blank"><i class="fab fa-instagram"></i></a>
                <a href="https://www.youtube.com/@fushi494" target="_blank"><i class="fab fa-youtube"></i></a>
            </div>
        </div>
        <div class="footer-section">
            <h3>Li√™n h·ªá</h3>
            <p>
                ƒê·ªãa ch·ªâ: <a href="javascript:void(0)" (click)="openMapModal()">
                    138 C·∫ßn V∆∞∆°ng, Nguy·ªÖn VƒÉn C·ª´, Quy Nh∆°n, B√¨nh ƒê·ªãnh
                </a>
            </p>
            <p>ƒêi·ªán tho·∫°i: 0779421219</p>
            <p>Email: TechStore123&#64;gmail.com</p>
        </div>
    </div>
    <div class="footer-bottom">
        <p>¬© 2025 C√¥ng ty TNHH TechStore. T·∫•t c·∫£ c√°c quy·ªÅn ƒë∆∞·ª£c b·∫£o l∆∞u.</p>
    </div>
</footer>

<!-- Modal B·∫£n ƒë·ªì -->
<div class="modal fade" id="mapModal" tabindex="-1" aria-labelledby="mapModalLabel" aria-hidden="true" *ngIf="showMap">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="mapModalLabel">V·ªã tr√≠ c·ª≠a h√†ng</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"
                    (click)="closeMapModal()"></button>
            </div>
            <div class="modal-body">
                <iframe
                    src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d3875.3545421425247!2d109.21158981944244!3d13.757480365991613!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x316f6ce9f2011a65%3A0x7dca828134b0963!2zMTM4IEPhuqduIFbGsMahbmgsIE5ndXnhu4VuIFbEg24gQ-G7qywgUXV5IE5oxqFuLCBCw6xuaCDEkOG7i25oLCBWaeG7h3QgTmFt!5e0!3m2!1svi!2s!4v1749622057052!5m2!1svi!2s"
                    width="100%" height="450" style="border:0;" allowfullscreen="" loading="lazy"
                    referrerpolicy="no-referrer-when-downgrade"></iframe>
                <div class="mt-3">
                    <a href="https://www.google.com/maps/place/138+C%E1%BA%A7u+V%C4%A9nh+Tuy,+Nguy%E1%BB%85n+V%C4%83n+C%E1%BB%AB,+Quy+Nh%C6%A1n,+B%C3%ACnh+%C4%90%E1%BB%8Bnh,+Vi%E1%BB%87t+Nam/@13.757480,109.211589,15z"
                        target="_blank" class="btn btn-primary">M·ªü tr√™n Google Maps</a>
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" (click)="closeMapModal()">ƒê√≥ng</button>
            </div>
        </div>
    </div>
</div>