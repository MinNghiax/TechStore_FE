<nav class="breadcrumb">
  <a style="font-size: small; margin-left: 50px;" class="breadcrumb-link" [routerLink]="['/home/list']" [routerLinkActive]="'active-link'"> Trang Chủ </a> 
  <label class="small" style="font-size: small;" for="">  > Danh sách Sản phẩm</label>

</nav>

<div class="outer-container">
  <div class="product-list">    
    <!-- Kiểm tra nếu không có sản phẩm -->
    <div *ngIf="products.length === 0">Không có sản phẩm nào!</div>
    
    <!-- Hiển thị danh sách sản phẩm -->
    <div class="product-item" *ngFor="let product of  productSearch.length > 0 ? productSearch : paginatedProducts" style="background-color: white;">
      <div class="product-image">
        <a [routerLink]="['/home/product/detail/', product.product_id]" [routerLinkActive]="'active-link'">
          <img [src]="product.PathAnh" />
        </a>
      </div>
      <div class="product-details">
        <p class="p1">{{ product.product_name }}</p>
        <p class="p2">${{ product.price }}</p>
      </div>

      <button type="button" data-bs-toggle="modal" data-bs-target="#exampleModal" (click)="themDon()">
        Mua ngay
      </button>
    </div>
  </div>
</div>


<div class="modal fade" id="exampleModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true" *ngIf="userService.getCurrentUser()">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h1 class="modal-title fs-5" id="exampleModalLabel" style="margin-left: 20px;">Thanh toán đơn hàng</h1>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close" style="margin-bottom: 20px;" (click)="dong()"></button>
      </div>
      <div class="modal-body">
        <form #paymentForm="ngForm" (ngSubmit)="muaNgay(paymentForm)">
          <div class="form-group">
            <label for="address">Địa chỉ giao hàng</label>
            <input type="text" id="address" name="address" placeholder="Nhập địa chỉ giao hàng" required ngModel>
          </div>
          <div class="form-group">
            <label for="phone">Số điện thoại</label>
            <input type="tel" id="phone" name="phone" placeholder="Nhập số điện thoại" pattern="[0-9]{10}" required ngModel>
          </div>
          <div class="form-group">
            <label for="payment">Phương thức thanh toán</label>
            <select id="payment" name="payment" required ngModel>
              <option value="">Chọn một phương thức thanh toán</option>
              <option value="credit_card">Thanh toán bằng thẻ tín dụng</option>
              <option value="bank_transfer">Chuyển khoản</option>
              <option value="cash_on_delivery">Thanh toán khi nhận hàng</option>
            </select>
          </div>
          <div class="modal-footer">
            <button type="submit" class="btn btn-primary" [disabled]="!paymentForm.valid">Đặt ngay</button>
          </div>
        </form>
      </div>

    </div>
  </div>
</div>

<div class="pagination-controls">
  <button class="btn btn-secondary" (click)="previousPage()" [disabled]="currentPage === 1">
    <i class="fas fa-chevron-left"></i>
  </button>
  <span>Trang {{ currentPage }} / {{ totalPages }}</span>
  <button class="btn btn-secondary" (click)="nextPage()" [disabled]="currentPage === totalPages">
    <i class="fas fa-chevron-right"></i>
  </button>
</div>




